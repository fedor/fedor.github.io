<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width,initial-scale=1">
		<link rel="preconnect" href="https://fonts.googleapis.com">
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
		<link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:ital@0;1&family=IBM+Plex+Sans:ital@0;1&family=IBM+Plex+Serif:ital@0;1&display=swap" rel="stylesheet">
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@tabler/icons-webfont@latest/tabler-icons.min.css" />
		<link href="/style.css" rel="stylesheet">
		<noscript>
			<link href="/style.noscript.css" rel="stylesheet">
		</noscript>

		<!-- Global site tag (gtag.js) - Google Analytics -->
		<script async src="https://www.googletagmanager.com/gtag/js?id=UA-155295044-1"></script>
		<script>
			window.dataLayer = window.dataLayer || [];
			function gtag(){dataLayer.push(arguments);}
			gtag('js', new Date());

			gtag('config', 'UA-155295044-1');
		</script>
		<script type="text/javascript">
			function toggleMobileMenu() {
				if (document.getElementById("mobileNav").hasAttribute("open")) {
					Array.from(document.getElementsByTagName('video'))
						.forEach(e => e.classList.remove('mobileMenuOpen'))
					Array.from(document.getElementsByTagName('audio'))
						.forEach(e => e.classList.remove('mobileMenuOpen'))
				} else {
					Array.from(document.getElementsByTagName('video'))
						.forEach(e => e.classList.add('mobileMenuOpen'))
					Array.from(document.getElementsByTagName('audio'))
						.forEach(e => e.classList.add('mobileMenuOpen'))
				}
			}

			const htmlClassList = document.getElementsByTagName("html")[0].classList
			function getPreferredColorScheme() {
				return (
					window.matchMedia("(prefers-color-scheme: dark)").matches
					? 'dark'
					: (window.matchMedia("(prefers-color-scheme: light)")
						? 'light'
						: undefined)
				)
			}

			function setColorScheme(scheme) {
				const preferedScheme = getPreferredColorScheme()
				const htmlDefinedScheme = htmlClassList.contains("dark") ? 'dark' : (htmlClassList.contains("light") ? 'light' : undefined)
				const activeScheme = htmlDefinedScheme || getPreferredColorScheme() || 'light'
				const inverseScheme = scheme === 'light'
					? 'dark'
					: (scheme === 'dark'
						? 'light'
						: htmlDefinedScheme || getPreferredColorScheme() || 'light')

				const colorSchemeToggleElement = document.getElementById("colorSchemeToggle")
				const mobileColorSchemeToggleElement = document.getElementById("mobileColorSchemeToggle")
				if (inverseScheme === 'light') {
					// Set 'dark' scheme
					if ('dark' === preferedScheme) {
						localStorage.removeItem('colorScheme')
					} else {
						localStorage.colorScheme = 'dark'
					}

					htmlClassList.remove('light')
					htmlClassList.add('dark')
					if (colorSchemeToggleElement) {
						// colorSchemeToggleElement.innerHTML = '&#x1F319;' // '[ Light OFF ]'
					}
					if (mobileColorSchemeToggleElement) {
						// mobileColorSchemeToggleElement.innerHTML = '&#x1F319;' // '[ Light OFF ]'
						mobileColorSchemeToggleElement.classList.remove("hidden")
					}
				} else {
					// Set 'light' scheme
					if ('light' === preferedScheme) {
						localStorage.removeItem('colorScheme')
					} else {
						localStorage.colorScheme = 'light'
					}

					htmlClassList.remove('dark')
					htmlClassList.add('light')
					if (colorSchemeToggleElement) {
						// colorSchemeToggleElement.innerHTML = '☀️' // '[ Light ON ]'
					}
					if (mobileColorSchemeToggleElement) {
						// mobileColorSchemeToggleElement.innerHTML = '☀️' // '[ Light ON ]'
						mobileColorSchemeToggleElement.classList.remove("hidden")
					}
				}
			}

			window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', function (obj) {
				if (obj.matches) { setColorScheme(localStorage.colorScheme || 'dark') }
			})

			window.matchMedia('(prefers-color-scheme: light)').addEventListener('change', function (obj) {
				if (obj.matches) { setColorScheme(localStorage.colorScheme || 'light') }
			})

			// on page load
			setColorScheme(localStorage.colorScheme || getPreferredColorScheme())
		</script>
		<title>Fedor Korshunov</title>
	</head>
	<body class="dark:bg-neutral-800 dark:text-neutral-200 bg-neutral-100 text-neutral-700">
		<div
			class="min-h-screen flex flex-col justify-between"
		>
			<div
				id="header"
				class="bg-neutral-200 dark:bg-neutral-900 fixed top-0 left-0 right-0"
				style="-webkit-backface-visibility: hidden; -webkit-transform: translateZ(0);"
			>
				<div class="hidden sm:flex max-w-screen-lg items-center justify-between mx-auto py-4">
					<a href="/">
						<h1 id="name" class="ml-8 font-serif text-2xl">Fedor Korshunov</h1>
					</a>
					<p id="navlinks" class="mr-8 space-x-8 text-lg">
						<a href="/posts">Posts</a>
						<a href="/resume">Resume</a>
						<a
							id="colorSchemeToggle"
							href="javascript:void(0);"
							onclick="setColorScheme()"
							class="text-2xl"
						>
							<i class="ti ti-bulb"></i>
						</a>	
					</p>
				</div>

				<div class="sm:hidden text-lg">
					<a
						class="text-2xl px-4 py-4 align-text-bottom hidden float-right"
						id="mobileColorSchemeToggle"
						href="javascript:void(0);"
						onclick="setColorScheme()"
					></a>
					<details
						id="mobileNav"
						class="flex sm:hidden flex-col"
					>
						<summary
							onclick="toggleMobileMenu()"
							class="font-serif text-2xl py-4 px-4"
						>
							Fedor Korshunov
						</summary>
						<a class="px-4 py-4" href="/">About</a>
						<a class="px-4 py-4" href="/posts">Posts</a>
						<a class="px-4 py-4" href="/resume">Resume</a>
					</details>
				</div>
			</div>

			<div
				id="content"
				class="mt-24 mb-8 grow flex flex-col"	
			>
				{{{content}}}
			</div>

			<div
				id="footer"
				class="clear-both dark:bg-neutral-900 dark:text-neutral-600 bg-neutral-200 text-neutral-400 text-sm py-4"
			>
				<div class="flex flex-col max-w-screen-md mx-auto items-center space-y-0.25">
					<div class="flex space-x-4">
						<a href="https://github.com/fedor">GitHub</a>
						<a href="https://www.linkedin.com/in/fedorhk/">LinkedIn</a>
						<span>mail@fedor.cc</span>
					</div>
					<div class="flex space-x-4">
						<div>©2023 Fedor Korshunov</div>
					</div>
				</div>
				<!-- <div>About Posts Resume</div>
				<div>©2023 Fedor Korshunov</div> -->
			</div>
		</div>

		<script type="text/javascript">
			setColorScheme(localStorage.colorScheme || getPreferredColorScheme())
		</script>
	</body>
</html>